{#https://developers.google.com/chart/interactive/docs/points#fullhtml#}
{% extends 'PanelOperatorBundle::layout.html.twig' %}


{% block breadcrumb %}
    <ul class="breadcrumb well">
        <li>Статистика</li>
    </ul>
{% endblock %}

{% block content %}
    <div class="well">
        <div id="stats" style="width: 750px; height: 300px;"></div>
        <br/>
        <br/>
        <table class="table">
            <tr>
                <td></td>
                {% for date, c in allUsers %}
                    <td><b>{{ date }}</b></td>
                {% endfor %}
            </tr>
            <tr>
                <td><b>IMKARD</b></td>
                {% for date, c in allUsers %}
                    <td style="text-align: center">{{ c }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td><b>DOROGA</b></td>
                {% for date, c in allUsers %}
                    <td style="text-align: center">{{ usersOperator[date] is defined ? usersOperator[date] : 0  }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td><b>Оплачено</b></td>
                {% for date, c in allUsers %}
                    <td style="text-align: center">{{ usersComplated[date] is defined  ? usersComplated[date] : 0 }}</td>
                {% endfor %}
            </tr>
        </table>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript"  src="https://www.google.com/jsapi"></script>
    <script>
        google.load('visualization', '1.1', {packages: ['line']});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Месяц',  'imkard', 'doroga'],
                {% for date, c in allUsers %}
                ['{{ date }}', {{ c }}, {{ usersOperator[date] is defined ? usersOperator[date] : 0  }} ],
                {% endfor %}
            ]);

            var options = {
                title: 'Cnатистика заявок',
                curveType: 'function',
                legend: { position: 'bottom' },
                pointSize: 20,
                pointShape: 'circle'
            };

            var chart = new google.charts.Line(document.getElementById('stats'));

            chart.draw(data, options);
        }
    </script>
{% endblock %}