{% extends 'PanelOperatorBundle::layout.html.twig' %}

{% block content %}
    <form method="get">
        <div class="row">
            <div class="col-xs-3">
                <input type="date" name="params[start]" class="form-control" value="{{ params['start'] }}">
            </div>
            <div class="col-xs-3">
                <input type="date" name="params[end]" class="form-control" value="{{ params['end'] }}">
            </div>
        </div>
        <table class="table">
            <tr>
                <th>
                    Найдено: {{ users | length }} шт.
                </th>
                <th></th>
                <th>
                    <select name="params[operator]">
                            <option value="">Все операторы</option>
                        {% for o in operators %}
                            <option value="{{ o.id }}" {{ o.id == params['operator'] ? 'selected' }}>{{ o }}</option>
                        {% endfor %}
                    </select>
                </th>
                <th>
                    <select name="params[company]">
                        <option value="">Все компании</option>
                        {% for c in companies %}
                            <option value="{{ c.id }}" {{ c.id == params['company'] ? 'selected' }}>{{ c }}</option>
                        {% endfor %}
                    </select>
                </th>
                <th></th>
                <th>
                    <select name="params[status]">
                        <option  {{ '' == params['status'] ? 'selected' }} value="100">Все</option>
                        <option  {{ '0' == params['status'] ? 'selected' }} value="0">Новые</option>
                        <option  {{ '2' == params['status'] ? 'selected' }} value="2">Оплаченные</option>
                        <option  {{ '3' == params['status'] ? 'selected' }} value="3">В&nbsp;производстве</option>
                        <option  {{ '6' == params['status'] ? 'selected' }} value="6">Изготовлено</option>
                        <option  {{ '4' == params['status'] ? 'selected' }} value="4">На почте</option>
                        <option  {{ '5' == params['status'] ? 'selected' }} value="5">Получены</option>
                    </select>
                </th>
                <th>
                    <button type="submit" class="btn btn-default">Фильтр</button>
                </th>
            </tr>
            <tr>
                <th>ID</th>
                <th>Дата заявки</th>
                <th>Оператор</th>
                <th>Компания</th>
                <th>ФИО</th>
                <th>Статус</th>
                <th>Цена</th>
            </tr>
            {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.created | date('d.m.Y') }}</td>
                    <td>{{ user.company.operator }}</td>
                    <td>{{ user.company }}</td>
                    <td>{{ user }}</td>
                    <td>{{ user.statusStringTwig |raw }}</td>
                    <td>{{ user.price }}</td>
                </tr>
            {% endfor %}
        </table>
    </form>
{% endblock %}